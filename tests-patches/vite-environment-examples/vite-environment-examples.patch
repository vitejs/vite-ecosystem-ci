From f323f050e8f715b4daae4d520c1e8f16ddf90422 Mon Sep 17 00:00:00 2001
From: sapphi-red <49056869+sapphi-red@users.noreply.github.com>
Date: Thu, 6 Feb 2025 14:15:14 +0900
Subject: [PATCH] temporary commit

---
 examples/react-server/vite.config.ts | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/examples/react-server/vite.config.ts b/examples/react-server/vite.config.ts
index 8b9ac1e..eea0987 100644
--- a/examples/react-server/vite.config.ts
+++ b/examples/react-server/vite.config.ts
@@ -14,7 +14,6 @@ import {
   type ResolvedConfig,
   createServerModuleRunner,
   defineConfig,
-  parseAstAsync,
 } from "vite";
 import {
   ENTRY_BROWSER_BOOTSTRAP,
@@ -217,7 +216,7 @@ function vitePluginUseClient(): PluginOption {
       manager.clientReferenceMap.delete(id);
       if (code.includes("use client")) {
         const runtimeId = await normalizeReferenceId(id, "client");
-        const ast = await parseAstAsync(code);
+        const ast = this.parse(code);
         let output = await transformDirectiveProxyExport(ast, {
           directive: "use client",
           id: runtimeId,
@@ -291,7 +290,7 @@ function vitePluginServerAction(): PluginOption {
       if (!code.includes("use server") || id.includes("/.vite/deps/")) {
         return;
       }
-      const ast = await parseAstAsync(code);
+      const ast = this.parse(code);
       tinyassert(this.environment);
       const runtimeId = await normalizeReferenceId(id, "rsc");
       if (this.environment.name === "rsc") {
-- 
2.47.1

