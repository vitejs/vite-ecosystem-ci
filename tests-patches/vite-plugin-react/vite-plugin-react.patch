From 57495620ceeda3647758c4fda38814018ce84f30 Mon Sep 17 00:00:00 2001
From: sapphi-red <49056869+sapphi-red@users.noreply.github.com>
Date: Thu, 27 Mar 2025 14:25:34 +0900
Subject: [PATCH] temporary commit

---
 packages/plugin-react/src/index.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/packages/plugin-react/src/index.ts b/packages/plugin-react/src/index.ts
index 43e62c9..228196c 100644
--- a/packages/plugin-react/src/index.ts
+++ b/packages/plugin-react/src/index.ts
@@ -198,7 +198,8 @@ export default function viteReact(opts: Options = {}): PluginOption[] {
         ])
       }

-      if (opts.jsxRuntime === 'classic' && isJSX) {
+      // OXC injects self and source so these plugins are not needed for rolldown-vite
+      if (opts.jsxRuntime === 'classic' && isJSX && !this.meta.rolldownVersion) {
         if (!isProduction) {
           // These development plugins are only needed for the classic runtime.
           plugins.push(
--
2.48.1
